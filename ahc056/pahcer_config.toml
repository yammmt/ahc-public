[general]
version = "0.3.1"

[problem]
problem_name = "ahc056"
objective = "Min"
score_regex = '(?m)^\s*Score\s*=\s*(?P<score>\d+)\s*$'

[test]
start_seed = 0
end_seed = 100
threads = 0
out_dir = "./pahcer"

# ==============================
#         COMPILE STEPS
# ==============================

# Compile user's program
[[test.compile_steps]]
program = "cargo"
args = ["build", "--release"]

# Remove the old binary
[[test.compile_steps]]
program = "rm"
args = ["-rf", "./ahc056"]

# Move the compiled binary to the current directory
[[test.compile_steps]]
program = "cp"
args = ["../target/release/a", "./ahc056"]

# On macOS, there’s a possibility of SIGKILL or other issues occurring, 
# so it’s better to build the visualizer in advance
# rather than running it with cargo run every time.

# Compile the visuzlizer
[[test.compile_steps]]
program = "cargo"
args = ["build", "--release", "--bin", "vis"]
current_dir = "./tools"

# Remove the old vis
[[test.compile_steps]]
program = "rm"
args = ["-f", "./vis"]

# Move the vis to the current directory
[[test.compile_steps]]
program = "mv"
args = ["../target/release/vis", "./vis"]

# ==============================
#           TEST STEPS
# ==============================

# Run the user's program
[[test.test_steps]]
program = "./ahc056"
args = []
stdin = "./tools/in/{SEED04}.txt"
stdout = "./tools/out/{SEED04}.txt"
stderr = "./tools/err/{SEED04}.txt"
measure_time = true

# Run the visualizer to calculate the score
[[test.test_steps]]
program = "./vis"
args = ["./tools/in/{SEED04}.txt", "./tools/out/{SEED04}.txt"]
measure_time = false

